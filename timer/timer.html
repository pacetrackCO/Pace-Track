<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cronómetro de Paso para Atletas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="stylestimer.css">
    <link rel="stylesheet" href="logo-splash/stylesintro.css">
</head>

<body>
    <img id="logo" src="logo-splash/mi_logo.png" alt="Logo">
    <script src="logo-splash/scriptsintro.js"></script>

    <!-- Modal para configuración de nombres -->
    <div id="setup-modal" class="modal">
        <div class="modal-content">
            <h2>Configuración de Vueltas</h2>
            <p>¿Cómo desea configurar los nombres?</p>
            <div class="modal-buttons">
                <button id="setup-with-names">Ingresar manualmente</button>
                <button id="setup-with-excel">Cargar desde Excel</button>
                <button id="setup-without-names">Usar números</button>
            </div>
        </div>
    </div>

    <!-- Modal para cargar Excel -->
    <div id="excel-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <h2>Cargar Nombres desde Excel</h2>
            <p>Seleccione un archivo Excel (.xlsx) con los nombres en la primera columna</p>
            <input type="file" id="excel-file" accept=".xlsx, .xls" style="margin: 1rem 0; padding: 0.5rem; width: 100%;">
            <div id="excel-preview" style="max-height: 200px; overflow-y: auto; margin: 1rem 0; text-align: left; display: none;">
                <h4>Nombres detectados:</h4>
                <ul id="names-list"></ul>
            </div>
            <div class="modal-buttons">
                <button id="process-excel">Procesar Archivo</button>
                <button id="cancel-excel">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal para ingresar nombres -->
    <div id="names-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <h2>Ingresar Nombres de Vueltas</h2>
            <div id="names-input-container">
                <!-- Los inputs se generarán dinámicamente -->
            </div>
            <div class="modal-buttons">
                <button id="save-names">Guardar Nombres</button>
                <button id="cancel-names">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal para configuración después de completar vueltas -->
    <div id="repeat-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <h2>Configuración de Vueltas</h2>
            <p>Se han completado todas las vueltas con nombre. ¿Qué desea hacer?</p>
            <div class="modal-buttons">
                <button id="repeat-names">Repetir nombres</button>
                <button id="continue-numbers">Continuar con números</button>
            </div>
        </div>
    </div>

    <div id="app-container" style="display:none;">
        <div id="video-container">
            <video id="video" autoplay playsinline></video>
            <canvas id="overlay-canvas"></canvas>
        </div>
        <div id="timer-display">00:00.000</div>
        <div id="controls">
            <button id="reset-button">Reiniciar</button>
        </div>
        <div id="status-message">Iniciando cámara...</div>
        <div id="sensitivity-slider-container">
            <span>Sensibilidad:</span>
            <input type="range" id="sensitivity-slider" min="1" max="1000" value="200">
        </div>
        <div id="laps-container" style="display:none;">
            <h3>Lista de Tiempos</h3>
            <ul id="laps-list">
            </ul>
        </div>
    </div>
    <div id="message-box" class="message-box">
        <p id="message-content"></p>
        <button id="message-box-ok">OK</button>
    </div>
    <script src="scripsttimer.js"></script>
</body>
</html>